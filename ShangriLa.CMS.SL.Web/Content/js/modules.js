Shangrila.anchortag={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){var a=$("#booking-module").outerHeight();$(".room-title").on("click",function(b){b.preventDefault();var c=$(this).attr("href"),d=$(c).offset().top-2*a;console.log($(c).offset().top),console.log(a),console.log(d),Shangrila.scrollToPosition(d)})}},Shangrila.modules.push("anchortag"),Shangrila.banner={init:function(){this.root=Shangrila,this.readMoreReset(),this.readMoreCaption(),this.bannerHeight(),this.readMoreLinkCta(),this.animateArrowCta()},readMoreReset:function(){var a=(this.root,$(".read-more-container"));a.each(function(){$(this).find(".description").removeAttr("style").find(".moreellipses").remove(),$(this).find(".description").find(".morecontent span").unwrap(),$(this).find(".read-more-droplink").removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down").text("Read More")})},readMoreCaption:function(){var a=this.root,b=169,c=50;a.screenWidth<Shangrila.medium&&(b=142),a.screenWidth<a.extraSmall&&(b=66);var d="...",e=$(".read-more-container");e.each(function(){var a=$(this).find(".read-more-droplink"),e=$(this).find(".description").html();if(e.length>b){var f=e.substr(0,b),g=e.substr(b,e.length-b),h=f+'<span class="moreellipses">'+d+'&nbsp;</span><span class="morecontent"><span>'+g+"</span></span>";$(this).find(".description").html(h),$(this).find(".description").css("height",c)}else a.hide()})},readMoreLinkCta:function(){var a=$(".read-more-container"),b="Read More",c="Read Less";a.each(function(){var a=$(this).find(".read-more-droplink"),d=50;$(this).find(".description").html();a.on("click",function(){if($(this).hasClass("icon-ios-arrow-down")){$(this).removeClass("icon-ios-arrow-down").addClass("icon-ios-arrow-up"),$(this).parents(".read-more-container").find(".moreellipses").hide(),$(this).parents(".read-more-container").find(".morecontent").slideDown();var a=$(this).parents(".read-more-container").find(".morecontent").height();$(this).parents(".read-more-container").find(".description").animate({height:a+d-20}),$(this).text(c)}else $(this).removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down"),$(this).parents(".read-more-container").find(".moreellipses").show(),$(this).parents(".read-more-container").find(".morecontent").stop().hide(),$(this).text(b),$(this).parents(".read-more-container").find(".description").animate({height:d})})})},bannerHeight:function(){var a=(this.root,$(".main-banner-hotel-landing"));a.each(function(){var a=($(this).height(),Shangrila.screenHeight),b=$("header").height(),c=a-b,d=$(this).find(".caption-container-hotel-landing").height(),e=c-d;$(this).css("height",c),Shangrila.small>Shangrila.screenWidth?Shangrila.screenWidth>Shangrila.screenHeight?$(this).find(".image-container img").css("height",c):$(this).find(".image-container img").css("height",e):$(this).find(".image-container img").css("height","auto")})},animateArrowCta:function(){var a=function(b,c){$(b).css({top:"40%"}),$(b).animate({top:"50%"},{duration:c,complete:function(){a(this,c)}})};a($(".explore-button::before"),600)},viewportChange:function(){this.readMoreReset(),this.readMoreCaption(),this.bannerHeight()}},Shangrila.modules.push("banner"),Shangrila.bookingModule={init:function(){this.root=Shangrila,this.calendarInit(),this.toolTipBookingModule(),this.addRemoveRooms(),this.openCloseSpecialCode(),this.populateGuestDetails(),this.selectValueCalc(),this.searchHotelsDropPanel(),this.bookingModuleMobile()},calendarInit:function(){this.checkIncheckOut(),this.checkIncheckOutRoomListing()},checkIncheckOut:function(){var a=$(".checkInSelector"),b=$(".checkOutSelector"),c={minDate:new Date,dateFormat:"yy/mm/dd",dayNamesMin:["S","M","T","W","T","F","S"],showOptions:{direction:"down"},beforeShow:function(a,b,c){var d=($(".hasDatepicker").parents(".field-container").outerWidth(),$(this)),e=d.parents(".check-status-block").find("#bookingBox");Shangrila.bookingModule.addArrowsCalendar(),d.parents(".booking-panel").hasClass("sticked")||Shangrila.scrollToElement(d,-$("#booking-module").outerHeight()/2),d.hasClass("checkInSelector")?e.css({left:0}):e.css({left:"auto",right:parseInt($("#ui-datepicker-div").outerWidth())}),$("#ui-datepicker-div").css({position:"absolute",top:0}),e.append($("#ui-datepicker-div")),$("#ui-datepicker-div").hide()},onChangeMonthYear:function(){Shangrila.bookingModule.addArrowsCalendar()}};a.datepicker(c),a.datepicker("setDate",new Date),b.datepicker(c),b.datepicker("setDate",1)},checkIncheckOutRoomListing:function(){var a=$(".checkInSelectorRooms"),b=$(".checkOutSelectorRooms"),c={minDate:new Date,dateFormat:"yy/mm/dd",dayNamesMin:["S","M","T","W","T","F","S"],showOptions:{direction:"down"},beforeShow:function(a,b,c){$(".hasDatepicker").parents(".field-container").outerWidth();Shangrila.bookingModule.addArrowsCalendar(),Shangrila.scrollToElement($(this),-$(".room-landing-found-container").outerHeight()/2-150),$(this).hasClass("checkInSelectorRooms")?$("#ui-datepicker-div").parents("#bookingBoxRooms").css({left:0}):$("#ui-datepicker-div").parents("#bookingBoxRooms").css({left:"auto",right:parseInt($("#ui-datepicker-div").outerWidth())}),$("#ui-datepicker-div").css({position:"absolute",top:0}),$("#bookingBoxRooms").append($("#ui-datepicker-div")),$("#ui-datepicker-div").hide()},onChangeMonthYear:function(){Shangrila.bookingModule.addArrowsCalendar()}};a.datepicker(c),a.datepicker("setDate",new Date),b.datepicker(c),b.datepicker("setDate",1)},addArrowsCalendar:function(){this.root;setTimeout(function(){var a=$(".ui-datepicker-prev"),b=$(".ui-datepicker-next");a.addClass("icon-ios-arrow-left"),b.addClass("icon-ios-arrow-right")},200)},toolTipBookingModule:function(){var a=$(".tooltip-cta");a.each(function(){_this=$(this);var a=_this.parents(".booking-panel").find(".tool-tip-container").html();_this.tooltip({content:a,position:{my:"right+25 top",at:"enter bottom+11",using:function(a,b){$(this).css(a),$(this).addClass(b.vertical)}}})})},addRemoveRooms:function(){$(".room-block").eq(0).find(".delete-room").addClass("hidden"),this.roomCounter=1,this.maxRooms=$(".room-addition-block").attr("data-max-rooms"),this.addRoomBlock(),this.removeRoomBlock()},addRoomBlock:function(){var a=this,b=$(".add-room");b.on("click",function(c){if(c.preventDefault(),a.roomCounter<a.maxRooms){a.roomCounter++;var d=$(".room-block").first().clone(!0);d.find(".room-number").text("Room "+a.roomCounter),d.find(".adults select").attr("name","adultsRoom"+a.roomCounter),d.find(".children select").attr("name","childrenRoom"+a.roomCounter),d.find(".delete-room").removeClass("hidden");d.find("select"),d.find(".adults select").val(),d.find(".children select").val();d.insertBefore(b.parent()),a.selectValueCalc(),a.roomCounter>a.maxRooms-1&&b.hide()}})},removeRoomBlock:function(){var a=this,b=$(".add-room");$(".room-addition-container").on("click",".delete-room",function(){1!=$(".room-block").length&&($(this).parents(".room-block").remove(),a.roomCounter--,a.resetRoomNumber(),a.selectValueCalc(),b.show())})},resetRoomNumber:function(){var a=$(".room-block");a.each(function(a,b){var c=a+1;$(this).find(".room-number").text("Room "+c),$(this).find(".adults select").attr("name","adultsRoom"+c),$(this).find(".children select").attr("name","childrenRoom"+c)})},openCloseSpecialCode:function(){var a=$(".special-code-cta");a.on("click",function(){$(this).hide(),$(this).next().slideDown(function(){$(this).find(".enter-code-block input").on("focus",function(){$(this).parents(".field-container").addClass("active")})})}),$(".special-code-block").on("click",".close-code-cta",function(){$(this).parents(".special-code-container").slideUp(function(){a.show()})})},selectValueCalc:function(){var a=$(".drop-panel-block").find("select"),b=0;a.each(function(){var a,c=$(this).find("option:selected");b+=Number(c.text()),a=b>1?b+" Guests":b+" Guest",$(this).parents(".drop-selector").find("span.guests").text(a)}),$(".drop-panel-block").each(function(){var a,b=$(this).find(".room-block").length;a=b>1?b+" Rooms":b+" Room",$(this).parents(".drop-selector").find("span.rooms").text(a)})},populateGuestDetails:function(){var a=this,b=$(".guest-details"),c=$(".room-addition-container select"),d=$(".room-addition-container .confirm-cta"),e=$(".drop-panel-block");b.on("click",function(a){var b=$(this).next(),c=$(this).find(".field-container");a.stopPropagation(),Shangrila.hideElement(),"block"==b.css("display")?(c.removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down"),b.slideUp(300)):(c.removeClass("icon-ios-arrow-down").addClass("icon-ios-arrow-up"),b.slideDown(250)),callback=function(){c.removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down"),b.slideUp(),$("input#room-results").val(JSON.stringify($("#bookingPanelForm").serializeObject()))},Shangrila.setEscapeElement(e),Shangrila.setEscapeCallback(callback)}),c.each(function(){$(this).on("change",function(){a.selectValueCalc()})}),d.on("click",function(){return $(this).parents(".room-guests-block").find(".guest-details .field-container").removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down"),$(this).parents(".drop-panel-block").slideUp(),$("input#room-results").val(JSON.stringify($("#bookingPanelForm").serializeObject())),!1}),$(document).on("keyup",function(a){var b=a.keyCode||a.which;27==b&&"block"==$(".drop-panel-block").css("display")&&d.trigger("click")})},searchHotelsDropPanel:function(){var a=$(".search-hotels-block");a.each(function(){var a=$(this).find("input[type=text]"),b=$(this).find(".drop-search-panel"),c=($(this).find(".close-btn"),b.find("li a"));a.on("keyup",function(c){var d=a.val().length;d>0?(b.slideDown(),b.scrollTop(0),$(this).parent().removeClass("icon-ios-search"),$(this).parent().find(".close-btn").show()):(b.hide(),$(this).parent().addClass("icon-ios-search"),$(this).parent().find(".close-btn").hide())}),$(this).on("click",".close-btn",function(){""===a.val()?a.val(""):a.val(),b.scrollTop(0),b.hide(),$(this).parent().addClass("icon-ios-search"),$(this).hide()}),c.on("click",function(){var a=$(this).text();$(this).parents(".search-hotels-block").find('input[name="searchItem"]').val(a),$(this).parents(".search-hotels-block").find(".close-btn").trigger("click")})})},bookingModuleMobile:function(){var a=$(".panel-block");a.each(function(){var a=$(".book-room-cta a"),b=$(this).find(".form-elements-section");a.on("click",function(){Shangrila.screenWidth>=Shangrila.small?b.show():"block"==b.css("display")?($(this).removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down"),b.slideUp()):($(this).removeClass("icon-ios-arrow-down").addClass("icon-ios-arrow-up"),b.slideDown())})})},resetBookingModule:function(){var a=$(".book-room-cta a"),b=$(".form-elements-section");Shangrila.screenWidth>=Shangrila.small&&(a.removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down"),b.removeAttr("style"))},viewportChange:function(){}},Shangrila.modules.push("bookingModule"),Shangrila.allCarousels={mainCarouselOptions:{margin:0,items:1,loop:!0,nav:!0,navText:!1,dots:!1,info:!0,smartSpeed:1e3,responsive:{0:{center:!0,stagePadding:20,margin:10},768:{stagePadding:0}}},mobileCarouselOptions:{items:1,loop:!0,nav:!0,navText:!1,dots:!1,info:!0,smartSpeed:500,autoHeight:!1,center:!0,stagePadding:20,margin:10},init:function(){this.root=Shangrila,this.initCarousels(),this.adjustHeight(),this.carouselMobile(),this.adjustHeightMobile()},initCarousels:function(){var a=(this.root,this);$(".mixed-carousel").each(function(){$owlContainer=$(this),$owlSlides=$(this).children(".item");var b=$owlSlides.length;$owlSlides.length>1?(!function(){var a=b>9?b:"0"+b;$owlSlides.each(function(b,c){var d=($(this),9>b?"0"+(b+1):b+1);$(this).find(".pagination").text(d+" / "+a)})}(),$owlContainer.owlCarousel(a.mainCarouselOptions)):$owlContainer.addClass("no-carousel")})},carouselReset:function(){this.root;Shangrila.screenWidth>Shangrila.extraSmall?($(".mobile-carousel").trigger("destroy.owl"),$(".mobile-carousel").show()):($(".mobile-carousel").trigger("destroy.owl"),this.carouselMobile(),this.adjustHeightMobile())},carouselMobile:function(){var a=(this.root,this);$(".mobile-carousel").each(function(){$owlContainer=$(this),$owlSlides=$(this).children(".item");var b=$owlSlides.length;if($owlSlides.length>1&&Shangrila.screenWidth<Shangrila.extraSmall){!function(){var a=b>9?b:"0"+b;$owlSlides.each(function(b,c){var d=($(this),9>b?"0"+(b+1):b+1);$(this).attr("data-pos",d+" / "+a)})}(),$owlContainer.owlCarousel(a.mobileCarouselOptions),$owlContainer.find(".owl-nav").append('<span class="pagination"></span>');var c=$owlContainer.find(".owl-item.active").find(".item").attr("data-pos");$owlContainer.parents(".carousel-container").find(".pagination").text(c),$owlContainer.on("initialized.owl.carousel changed.owl.carousel resized.owl.carousel",function(a){var b=$(this).find(".item").eq(a.item.index).attr("data-pos");$(this).find(".pagination").text(b)})}else $owlContainer.show(),$owlContainer.addClass("no-carousel")})},adjustHeight:function(){this.root;$(".mixed-carousel").length>0&&(Shangrila.screenWidth<Shangrila.extraSmall?$(".mosaic-banner-carousel .item .equalHeight").css({height:"auto"}):$(".mosaic-banner-carousel .item").each(function(){$(this).find(".equalHeight").heightAdjust()}))},adjustHeightMobile:function(){if($(".mobile-carousel").length>0){var a=$(".mobile-carousel"),b=$(".mobile-equal-height-block");a.each(function(){var a=$(this).find(b);Shangrila.screenWidth>0&&setTimeout(function(){a.heightAdjust()},200)})}},viewportChange:function(){this.adjustHeight(),this.adjustHeightMobile(),this.carouselReset()}},Shangrila.modules.push("allCarousels"),Shangrila.contactDetails={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.root;this.accordionHandler()},accordionHandler:function(){var a=this.root;$(".room-contact-details .accordion-header").on("click",function(){var b=$(this),c=$(".room-contact-container > li > .description"),d=$(".room-contact-container > li .accordion-header"),e=b.parent("li"),f=e.find(" > .description");d.removeClass("icon-accordian-minus");var g=function(){a.scrollToElement(b),b.addClass("icon-accordian-minus")};a.screenWidth<a.extraSmall&&a.accordionHandler(b,d,f,c,g)})},resetAccordion:function(){var a=this.root,b=$(".room-contact-container > li > .description"),c=$(".room-contact-container > li .accordion-header");a.screenWidth<a.extraSmall?(b.hide(),c.removeClass("icon-accordian-minus")):(b.show(),c.removeClass("icon-accordian-minus"))},viewportChange:function(){this.resetAccordion()}},Shangrila.modules.push("contactDetails"),Shangrila.equalHeightSections={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.root;this.adjustHeight()},adjustHeight:function(){var a=$(".equal-height-section"),b=$(".equal-height-block");a.each(function(){var a=$(this).find(b);Shangrila.screenWidth<Shangrila.extraSmall?a.css({height:"auto"}):a.heightAdjust()})},viewportChange:function(){this.adjustHeight()}},Shangrila.modules.push("equalHeightSections"),Shangrila.footer={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){var a=this.root;this.accordionHandler(),a.placeholderHandler()},accordionHandler:function(){var a=this.root;$(".sitelinks .accordion-header").on("click",function(){var b=$(this),c=$(".sitelinks > li > ul"),d=$(".sitelinks > li .accordion-header"),e=b.parent("li"),f=e.find(" > ul");d.removeClass("icon-accordian-minus");var g=function(){a.scrollToElement(b),b.addClass("icon-accordian-minus")};a.screenWidth<a.small&&a.accordionHandler(b,d,f,c,g)})},retinaReplacement:function(){$(".retina-image").each(function(){var a=($(this).height()/2,$(this).width()/2);$(this).css("width",a)})},resetAccordion:function(){var a=this.root,b=$(".sitelinks > li > ul"),c=$(".sitelinks > li .accordion-header");a.screenWidth<a.small?(b.hide(),c.removeClass("icon-accordian-minus")):(b.show(),c.removeClass("icon-accordian-minus"))},viewportChange:function(){this.resetAccordion()}},Shangrila.modules.push("footer"),Shangrila.hotelSupplies={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.root;this.accordionHandler()},accordionHandler:function(){var a=this.root;$(".everything-links .accordion-header").on("click",function(){var b=$(this),c=$(".everything-links > li > ul"),d=$(".everything-links > li .accordion-header"),e=b.parent("li"),f=e.find(" > ul");d.removeClass("icon-accordian-minus");var g=function(){a.scrollToElement(b),b.addClass("icon-accordian-minus")};a.screenWidth<a.small&&a.accordionHandler(b,d,f,c,g)})},resetAccordion:function(){var a=this.root,b=$(".everything-links > li > ul"),c=$(".everything-links > li .accordion-header");a.screenWidth<a.small?(b.hide(),c.removeClass("icon-accordian-minus")):(b.show(),c.removeClass("icon-accordian-minus"))},viewportChange:function(){this.resetAccordion()}},Shangrila.modules.push("hotelSupplies"),Shangrila.inPageNavigation={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.offSetCalc(),this.thePageNavigation(),this.mobileInpageNavigation()},offSetCalc:function(){var a=(this.root,$(".main-banner-hotel-landing"),$(".booking-panel")),b=$(".in-page-navigation"),c=$(".inpage-element"),d=$("header");c.each(function(){$(this).attr("data-pos",parseInt($(this).offset().top))}),d.attr("data-height",parseInt(d.outerHeight())),a.attr("data-height",parseInt(a.outerHeight())),a.attr("data-pos",parseInt(a.offset().top)),Shangrila.screenWidth>Shangrila.small?b.attr("data-height",38):b.attr("data-height",47)},scrollLinkFollow:function(){if($(".in-page-navigation").length>0&&$(".booking-panel").length>0){var a,b=$(".main-banner-hotel-landing"),c=$(".booking-panel"),d=$(".in-page-navigation"),e=(d.find('a[href^="#"]'),$(".explore-button"),$("header")),f=(b.outerHeight(),$(".inpage-element"));Shangrila.screenWidth<Shangrila.small?(a=parseInt(parseInt(e.attr("data-height"))+parseInt(d.attr("data-height"))),offsetBottomVal=a-50):(a=parseInt(parseInt(c.attr("data-height"))+parseInt(d.attr("data-height"))),offsetBottomVal=a-100),f.each(function(){var b=$(this);b.attr("data-height",b.outerHeight()),$(this).waypoint(function(a){if("up"===a){var c=b,d=c.attr("id");if($(".horizontal-scroll li").removeClass("active"),$(".horizontal-scroll li a[href='#"+d+"']").parent().addClass("active"),Shangrila.screenWidth<Shangrila.small){var e=$(".horizontal-scroll li a[href='#"+d+"']").parent().addClass("active").text();$(".selected-item span").text(e),$(".horizontal-scroll li").removeClass("hidden"),$(".horizontal-scroll li a[href='#"+d+"']").parent().addClass("hidden")}}},{offset:offsetBottomVal}),$(this).waypoint(function(a){if("down"===a){var c=b,d=c.attr("id");if($(".horizontal-scroll li").removeClass("active"),$(".horizontal-scroll li a[href='#"+d+"']").parent().addClass("active"),Shangrila.screenWidth<Shangrila.small){var e=$(".horizontal-scroll li a[href='#"+d+"']").parent().addClass("active").text();$(".selected-item span").text(e),$(".horizontal-scroll li").removeClass("hidden"),$(".horizontal-scroll li a[href='#"+d+"']").parent().addClass("hidden")}}},{offset:a})})}},thePageNavigation:function(){this.root;if($(".in-page-navigation").length>0&&$(".booking-panel").length>0){var a=$(".main-banner-hotel-landing"),b=$(".booking-panel"),c=$(".in-page-navigation"),d=c.find('a[href^="#"]'),e=($(".explore-button"),$("header"));a.outerHeight(),$(".inpage-element"),parseInt(e.attr("data-height"));d.on("click",function(a){a.preventDefault();var d=$(this).parent().index();c.find("li").removeClass("active"),$(this).parent().addClass("active"),$(".inpage-element").each(function(){$(this).attr("data-pos",parseInt($(this).offset().top))});var f=parseInt($(".inpage-element").eq(d).attr("data-pos"));b.addClass("sticked");var g;Shangrila.screenWidth>Shangrila.small?(g=parseInt(parseInt(b.attr("data-height"))+parseInt(c.attr("data-height"))-10),c.addClass("sticked").css({top:b.attr("data-height")+"px"})):(g=parseInt(parseInt(e.attr("data-height"))+parseInt(c.attr("data-height"))-10),c.addClass("sticked").css({top:e.attr("data-height")+"px"})),setTimeout(function(){$("html, body").stop().animate({scrollTop:parseInt(f-g)},500)},200)})}},mobileInpageNavigation:function(){this.root;if($(".in-page-navigation").length>0){var a=($(".in-page-navigation"),$(".in-page-navigation li a")),b=$(".selected-item");b.on("click",function(){var a=$(this).next();"block"==a.css("display")?(b.find("span").removeClass("icon-ios-arrow-up"),a.slideUp()):(b.find("span").addClass("icon-ios-arrow-up"),a.slideDown())}),a.on("click",function(c){var d=$(this),e=d.text(),f=d.parents(".in-page-navigation").find(".selected-item span"),g=d.parents(".in-page-navigation").find(".horizontal-scroll"),h=function(){f.text(e),a.parent().removeClass("hidden"),d.parent().addClass("hidden"),b.find("span").removeClass("icon-ios-arrow-up")};Shangrila.screenWidth<Shangrila.small?(g.hide(),h()):g.show()})}},bookingModuleSticked:function(){this.root;if(0===$(".in-page-navigation").length&&$(".booking-panel").length>0){var a=$("#booking-module"),b=(parseInt(a.attr("data-pos")),parseInt($("header").attr("data-pos")),parseInt(a.attr("data-height")));a.waypoint(function(c){"down"===c&&($(".header-container").addClass("fixed-to-relative"),a.css({top:-b}).addClass("sticked").animate({top:0}))},{triggerOnce:!0,offset:-b}),a.waypoint(function(b){"up"===b&&(a.removeClass("sticked").removeAttr("style"),$(".header-container").removeClass("fixed-to-relative"))},{triggerOnce:!0,offset:0})}},resetInlineNavigation:function(){Shangrila.screenWidth<Shangrila.small?($(".selected-item").show(),$(".in-page-navigation").find(".horizontal-scroll").hide()):($(".selected-item").hide(),$(".in-page-navigation").find(".horizontal-scroll").show(),$(".in-page-navigation li").removeClass("hidden"))},viewportChange:function(){this.offSetCalc(),this.resetInlineNavigation()}},Shangrila.modules.push("inPageNavigation"),Shangrila.locationequalHeightSections={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.root;this.adjustHeight()},adjustHeight:function(){var a=$(".map-equal-height-section"),b=$(".map-equal-height-block");a.each(function(){var a=$(this).find(b);if(Shangrila.screenWidth<Shangrila.small)a.css({height:"auto"}),$(this).css({height:"auto"});else{a.heightAdjust();var c=b.height();$(this).css("height",c)}})},viewportChange:function(){this.adjustHeight()}},Shangrila.modules.push("locationequalHeightSections"),Shangrila.moduleAnimation={init:function(){this.bindEvents(),this.animateArrow()},bindEvents:function(){this.getModules()},getModules:function(){var a=this;$.ajax({url:"js/module-animation.json",type:"GET",dataType:"json"}).done(function(b){var c=b;console.log(typeof c);for(var d=0;d<c.length;d++){var e=$(c[d].element);e.animation=c[d].animation,e.delay=c[d].delay?c[d].delay:0,a.setWaypoint(e)}}).fail(function(){})},setWaypoint:function(a){a.each(function(b,c){var d=$(this);d.data("animation",a.animation),d.data("delay",a.delay),d.css("opacity","0"),d.waypoint(function(a){"down"!=a||$(this.element).data("animated")||(0===d.data("delay")?$(this.element).animateCss(d.data("animation")):$(this.element).css("animation-delay",d.index()*d.data("delay")+"s").animateCss(d.data("animation")),$(this.element).data("animated",!0)),d.css("opacity","1"),this.destroy()},{offset:"95%"})})},animateArrow:function(){$(".explore-button").css("animation-iteration-count","infinite").animateCss("pulse")}},Shangrila.modules.push("moduleAnimation"),Shangrila.readMoreSection={init:function(){this.root=Shangrila,this.readMoreSectionReset(),this.readMoreSection(),this.readMoreLinkSection()},readMoreSectionReset:function(){var a=(this.root,$(".read-more-section-header"));a.each(function(){$(this).find(".description").removeAttr("style").find(".moreellipses").remove(),$(this).find(".description").find(".morecontent span").unwrap(),$(this).find(".read-more-droplink").removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down").text("Read More")})},readMoreSection:function(){var a=(this.root,this),b=66,c=45,d="...",e=$(".read-more-section-header");e.each(function(){var e=$(this).find(".read-more-droplink");if(Shangrila.screenWidth>767)a.readMoreSectionReset(),$(this).find(".read-more-droplink").hide();else if($(this).find(".description").length>0){var f=$(this).find(".description").html();if(f.length>b){var g=f.substr(0,b),h=f.substr(b,f.length-b),i=g+'<span class="moreellipses">'+d+'&nbsp;</span><span class="morecontent"><span>'+h+"</span></span>";$(this).find(".description").html(i),$(this).find(".description").css("height",c),e.show()}else e.hide()}})},readMoreLinkSection:function(){var a=$(".read-more-section-header"),b="Read More",c="Read Less";a.each(function(){var a=$(this).find(".read-more-droplink"),d=45;$(this).find(".description").html();a.on("click",function(){if($(this).hasClass("icon-ios-arrow-down")){$(this).removeClass("icon-ios-arrow-down").addClass("icon-ios-arrow-up"),$(this).parents(".read-more-section-header").find(".moreellipses").hide(),$(this).parents(".read-more-section-header").find(".morecontent").slideDown();var a=$(this).parents(".read-more-section-header").find(".morecontent").height();$(this).parents(".read-more-section-header").find(".description").animate({height:a+d-20}),$(this).text(c)}else $(this).removeClass("icon-ios-arrow-up").addClass("icon-ios-arrow-down"),$(this).parents(".read-more-section-header").find(".moreellipses").show(),$(this).parents(".read-more-section-header").find(".morecontent").stop().hide(),$(this).text(b),$(this).parents(".read-more-section-header").find(".description").animate({height:d})})})},viewportChange:function(){this.readMoreSectionReset(),this.readMoreSection()}},Shangrila.modules.push("readMoreSection"),Shangrila.selectBoxit={init:function(){},initializeSelectBox:function(a){if(a)$(a).selectBoxIt().data("selectBoxIt");else{$("select").selectBoxIt().data("selectBoxIt")}},viewportChange:function(){this.setSelectWidth()},setSelectWidth:function(){$(".ui-select-wrapper").each(function(a){var b=$(this),c=b.width(),d=b.find(".selectboxit-container .selectboxit"),e=b.find(".selectboxit-options"),f=parseInt(e.css("paddingLeft")),g=parseInt(e.css("paddingRight")),h=c-f-g;e.width(h),e.css("min-width",h),d.width(c),d.css("min-width",c),b.find(".selectboxit.btn").addClass("icon-ios-arrow-down")})}},Shangrila.modules.push("selectBoxit"),Shangrila.stickyModules={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.stickModules()},stickModules:function(){var a,b,c,d,e,f=$(".booking-panel"),g=$(".in-page-navigation"),h=$(".header-container");$(".main-banner-hotel-landing").length>0?($("#overview").data("waypoint")&&$("#overview").data("waypoint")[0].destroy(),$(window).width()>=Shangrila.small?(a=f.outerHeight(),b=g.outerHeight(),c=h.outerHeight(),d=a+b-10,f.css("visibility","hidden").addClass("sticked").css("top",-a),g.css("visibility","hidden").addClass("sticked").css("top",-b),$("#overview").data("waypoint")&&$("#overview").data("waypoint")[0].destroy(),e=$("#overview").waypoint(function(d){"down"==d?(f.css("visibility","visible"),f.stop().animate({top:0}),g.css("visibility","visible"),g.stop().animate({top:a},function(){h.stop().animate({top:-c})})):(f.stop().animate({top:-a},function(){f.css("visibility","hidden")}),g.stop().animate({top:-b}),h.stop().animate({top:0}))},{offset:d}),$("#overview").data("waypoint",e)):(a=f.outerHeight(),b=g.outerHeight(),c=h.outerHeight(),d=c+b-10,f.addClass("sticked").css("top",-a).css("visibility","visible"),g.addClass("sticked").css("top",-b).css("visibility","visible"),$("#overview").data("waypoint")&&$("#overview").data("waypoint")[0].destroy(),e=$("#overview").waypoint(function(a){"down"==a?(console.log("hotel booking small down"),g.stop().animate({top:c})):(console.log("hotel booking small up"),g.stop().animate({top:-b}))},{offset:d}),$("#overview").data("waypoint",e))):$(window).width()>=Shangrila.small?(a=f.outerHeight(),b=g.outerHeight(),c=h.outerHeight(),d=c,f.data("waypoint")&&f.data("waypoint")[0].destroy(),f.css("z-index",21),e=f.waypoint(function(a){"down"==a?(f.css("top",d).addClass("sticked"),f.stop().animate({top:0},function(){h.css("visibility","hidden")})):(f.removeAttr("style").removeClass("sticked"),h.css("visibility","visible"))},{offset:d}),f.data("waypoint",e)):(f.data("waypoint")&&f.data("waypoint")[0].destroy(),f.removeAttr("style").removeClass("sticked"),g.removeAttr("style"),h.removeAttr("style"),h.css("top",0))},viewportChange:function(){$("#overview").data("waypoint")&&$("#overview").data("waypoint")[0].destroy(),$(".booking-panel").data("waypoint")&&$(".booking-panel").data("waypoint")[0].destroy();$(".header-container").removeAttr("style").removeClass("sticked"),$(".booking-panel").removeAttr("style").removeClass("sticked"),$(".in-page-navigation").removeAttr("style").removeClass("sticked"),this.stickModules()}},Shangrila.modules.push("stickyModules"),Shangrila.textLimit={init:function(){this.root=Shangrila,this.restrictText()},restrictText:function(){var a=$(".restrict").text();a.length>85&&$(".restrict").text(a.substring(0,85)+"...")}},Shangrila.modules.push("textLimit"),Shangrila.fullVideo={init:function(){this.root=Shangrila,this.videoBackground()},videoBackground:function(){function a(){b.classList.add("stopfade")}var b=document.getElementById("bgvid");b&&b.addEventListener("ended",function(){b.pause(),a()})}},Shangrila.videoModules={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.videoLinker()},videoLinker:function(){var a=this.root,b=$(".video-link");b.each(function(){_this=$(this),_this.on("click",function(b){b.preventDefault();var c=$(this).attr("href");$(".common-popup-block").show();var d='<div class="pop-up-videoblock"><div class="video-block"><iframe style="width: 100%; height: 100%; position: absolute; top: 0px; bottom: 0px; right: 0px; left: 0px;" src="'+c+'&autoplay" allowfullscreen webkitallowfullscreen mozallowfullscreen><iframe></div></div>';$(".common-popup-block").append(d),a.scrollToTop(),Shangrila.overlayShow()})}),$(document).on("keyup",function(a){var b=a.keyCode||a.which;27==b&&"block"==$(".common-popup-block").css("display")&&$(".common-popup-block .close-btn").trigger("click")})},viewportChange:function(){"block"==$(".common-popup-block").css("display")&&Shangrila.overlayShow()}},Shangrila.modules.push("videoModules"),Shangrila.viewController={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.root;this.viewModuleController(),this.resetCarouselonListView()},viewModuleController:function(){$(".view-controller").length>0&&($(".list-view-cta").on("click",function(a){a.preventDefault(),$(".grid-view-cta").removeClass("active"),$(this).addClass("active"),$(".view-controller").addClass("room-landing-list-view-container"),$(".view-controller").find(".mobile-carousel").trigger("destroy.owl"),$(".room-landing-list-view-container").find(".mobile-equal-height-block").removeAttr("style"),$(".view-controller").find(".mobile-carousel").show()}),$(".grid-view-cta").on("click",function(a){a.preventDefault(),$(".list-view-cta").removeClass("active"),$(this).addClass("active"),$(".view-controller").removeClass("room-landing-list-view-container"),Shangrila.screenWidth<Shangrila.extraSmall&&($(".view-controller").find(".read-more-droplink").css({display:"inline-block"}),Shangrila.allCarousels.carouselReset())}))},resetCarouselonListView:function(){$(".view-controller").hasClass("room-landing-list-view-container")&&($(".room-landing-list-view-container").find(".mobile-carousel").trigger("destroy.owl"),$(".room-landing-list-view-container").find(".mobile-equal-height-block").removeAttr("style"))},viewportChange:function(){this.resetCarouselonListView()}},Shangrila.modules.push("viewController"),Shangrila.weatherMaps={init:function(){this.root=Shangrila,this.bindEvents()},bindEvents:function(){this.weatherMapsModule()},weatherMapsModule:function(a){$(".climate-time-control").length>0&&$(".climate-time-control").each(function(){
var a=$(this),b=$(this).attr("data-city"),c=$(this).attr("data-lang"),d="http://api.openweathermap.org/data/2.5/weather?q="+b+"&lang="+c+"&units=metric&id=524901&APPID=a58496cdeb8355f9f656ddef42d22069";$.getJSON(d,function(b){var c=b.weather[0].icon,d=new Date,e=d.getHours(),f=d.getMinutes(),g=e+":"+f,h=b.main.temp.toString().split(".")[0];a.find(".cloud").append('<img src="http://openweathermap.org/img/w/'+c+'.png">'),a.find(".time").text(g),a.find(".temp").text(h+"Â°")})})}},Shangrila.modules.push("weatherMaps");